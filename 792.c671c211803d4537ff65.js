(self.webpackChunkweather_app=self.webpackChunkweather_app||[]).push([[792],{6792:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DetailsModule:()=>H});var i=n(8583),r=n(4329),a=n(4220),o=n(1601),c=n(7716);let s=(()=>{class e{constructor(e){this.router=e}canActivate(e,t){return!(!e.queryParams.lat||!e.queryParams.lon)||this.router.createUrlTree([""])}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(r.F0))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})();const d=(0,a.PH)("[Details] Load Weather Details"),l=(0,a.PH)("[Details] Load Weather Details Success",(0,a.Ky)()),p=(0,a.PH)("[Details] Load Weather Details Failed"),g=(0,a.ZF)("details"),u=(0,a.P1)(g,e=>e.entity),h=(0,a.P1)(g,e=>e.loading),f=(0,a.P1)(g,e=>e.error);var y=n(605),Z=n(1585),m=n(1412);let v=(()=>{class e{get weather(){return this.dailyWeather.weather}get date(){return m.unix(this.dailyWeather.date).format("DD MMM - dddd")}get icon(){return`http://openweathermap.org/img/wn/${this.weather.icon}@2x.png`}unixToHourMinute(e){return m.unix(e).tz(this.timeZone).format("HH:mm")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-daily-weather"]],inputs:{dailyWeather:"dailyWeather",timeZone:"timeZone"},decls:19,vars:10,consts:[[1,"card"],[1,"badge","badge-secondary"],["alt","icone",3,"src"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"span",1),c._uU(2),c.ALo(3,"uppercase"),c.qZA(),c.TgZ(4,"div"),c.TgZ(5,"div"),c._UZ(6,"img",2),c.qZA(),c.TgZ(7,"div"),c.TgZ(8,"div"),c._uU(9),c.qZA(),c.TgZ(10,"div"),c._uU(11),c.qZA(),c.TgZ(12,"div"),c._uU(13),c.qZA(),c.qZA(),c.TgZ(14,"div"),c.TgZ(15,"div"),c._uU(16),c.qZA(),c.TgZ(17,"div"),c._uU(18),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Oqu(c.lcZ(3,8,t.date)),c.xp6(4),c.Q6J("src",t.icon,c.LSH),c.xp6(3),c.AsE("",t.weather.minTemp," K - ",t.weather.maxTemp," K"),c.xp6(2),c.hij("Humidade: ",t.weather.humidity," %"),c.xp6(2),c.hij("Velocidade do vento: ",t.weather.wind.speed," m/s"),c.xp6(3),c.hij("Nascer do sol: ",t.unixToHourMinute(t.weather.sunrise),""),c.xp6(2),c.hij("P\xf4r do sol: ",t.unixToHourMinute(t.weather.sunset),""))},pipes:[i.gd],styles:[".card[_ngcontent-%COMP%]{margin-top:8px;padding:8px;display:flex;flex-direction:column}.card[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.card[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-top:8px;display:grid;grid-template-columns:1fr 1fr 1fr;grid-column-gap:8px;align-items:center}.card[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.card[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:50px;height:50px}"],changeDetection:0}),e})();function w(e,t){1&e&&c._UZ(0,"app-loader")}function x(e,t){if(1&e&&(c._UZ(0,"app-daily-weather",7),c.ALo(1,"async")),2&e){const e=t.$implicit,n=c.oxw(3);c.Q6J("dailyWeather",e)("timeZone",c.lcZ(1,2,n.details$).city.timeZone)}}function A(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"h1"),c._uU(2),c.ALo(3,"async"),c.ALo(4,"async"),c.qZA(),c.TgZ(5,"div",4),c._UZ(6,"app-detailed-weather",5),c.ALo(7,"async"),c.qZA(),c.YNc(8,x,2,4,"app-daily-weather",6),c.ALo(9,"async"),c.BQk()),2&e){const e=c.oxw(2);c.xp6(2),c.AsE("",c.lcZ(3,4,e.details$).city.name,", ",c.lcZ(4,6,e.details$).city.country,""),c.xp6(4),c.Q6J("weather",c.lcZ(7,8,e.details$).current),c.xp6(2),c.Q6J("ngForOf",c.lcZ(9,10,e.details$).daily)}}function O(e,t){1&e&&(c.TgZ(0,"div"),c._uU(1,"Erro"),c.qZA())}function _(e,t){if(1&e&&(c.YNc(0,A,10,12,"ng-container",3),c.ALo(1,"async"),c.YNc(2,O,2,0,"div",3),c.ALo(3,"async")),2&e){const e=c.oxw();c.Q6J("ngIf",!c.lcZ(1,2,e.error$)),c.xp6(2),c.Q6J("ngIf",c.lcZ(3,4,e.error$))}}let P=(()=>{class e{constructor(e){this.store=e}ngOnInit(){this.store.dispatch(d()),this.details$=this.store.pipe((0,a.Ys)(u)),this.loading$=this.store.pipe((0,a.Ys)(h)),this.error$=this.store.pipe((0,a.Ys)(f))}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(a.yh))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-details"]],decls:5,vars:4,consts:[[1,"container-fluid"],[4,"ngIf","ngIfElse"],["notLoading",""],[4,"ngIf"],[1,"card","current-card"],[3,"weather"],[3,"dailyWeather","timeZone",4,"ngFor","ngForOf"],[3,"dailyWeather","timeZone"]],template:function(e,t){if(1&e&&(c.TgZ(0,"div",0),c.YNc(1,w,1,0,"app-loader",1),c.ALo(2,"async"),c.YNc(3,_,4,6,"ng-template",null,2,c.W1O),c.qZA()),2&e){const e=c.MAs(4);c.xp6(1),c.Q6J("ngIf",c.lcZ(2,2,t.loading$))("ngIfElse",e)}},directives:[i.O5,y.R,Z.V,i.sg,v],pipes:[i.Ov],styles:[".container-fluid[_ngcontent-%COMP%]{margin:0 0 16px;padding:32px 0 0}.container-fluid[_ngcontent-%COMP%]   .current-card[_ngcontent-%COMP%]{padding:16px}"]}),e})();const M=(0,a.Lq)({entity:void 0,loading:!1,error:!1},(0,a.on)(d,e=>Object.assign(Object.assign({},e),{entity:void 0,loading:!0,error:!1})),(0,a.on)(l,(e,{entity:t})=>Object.assign(Object.assign({},e),{entity:t,loading:!1})),(0,a.on)(p,e=>Object.assign(Object.assign({},e),{loading:!1,error:!0})));function C(e,t){return M(e,t)}var T=n(7057),q=n(9773),L=n(5304),$=n(8002),j=n(9112);const W=(0,a.ZF)("router"),F=(0,a.P1)(W,e=>e&&e.state||{}),U=(0,a.P1)(F,e=>e&&e.queryParams||{});var b=n(8983);let Y=(()=>{class e{constructor(e,t,n){this.actions$=e,this.store=t,this.weatherService=n,this.loadCurrentWeather$=(0,o.GW)(()=>this.actions$.pipe((0,o.l4)(d),(0,T.M)(this.store.pipe((0,a.Ys)(U))),(0,q.zg)(([e])=>(0,j.aj)([this.weatherService.getCityWeatherByCoord(e.lat,e.lon),this.weatherService.getWeatherDetails(e.lat,e.lon)])),(0,L.K)((e,t)=>(this.store.dispatch(p()),t)),(0,$.U)(([e,t])=>{const n=t;return n.city=Object.assign(Object.assign({},e.city),{timeZone:t.city.timeZone}),l({entity:n})})))}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(o.eX),c.LFG(a.yh),c.LFG(b.F))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e})();var D=n(5626);let H=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[s],imports:[[i.ez,r.Bz.forChild([{path:"",component:P,canActivate:[s]}]),a.Aw.forFeature("details",C),o.sQ.forFeature([Y]),D.K]]}),e})()}}]);